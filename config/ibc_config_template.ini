# Configuration IBC (IB Controller) pour IB Gateway
# À copier dans ~/ibc/config.ini sur le serveur
#
# Documentation: https://github.com/IbcAlpha/IBC/blob/master/userguide.md

# ============================================
# IDENTIFICATION IBKR
# ============================================

# Nom d'utilisateur IBKR
# IMPORTANT: Remplacez par votre vrai username IBKR
IbLoginId=VOTRE_USERNAME_IBKR

# Mot de passe IBKR
# IMPORTANT: Remplacez par votre vrai mot de passe
IbPassword=VOTRE_PASSWORD_IBKR

# Mode de trading
# paper = Paper Trading (simulation)
# live = Trading réel (ATTENTION!)
TradingMode=paper

# ============================================
# CONFIGURATION API
# ============================================

# Port API pour connexion ib_insync
# 4002 = Paper Trading (défaut)
# 4001 = Live Trading
IbApiPort=4002

# Accepter automatiquement les connexions API
AcceptIncomingConnectionAction=accept

# ============================================
# GESTION DE SESSION
# ============================================

# Pas de fermeture automatique
IbAutoClosedown=no

# Heure de fermeture (vide = jamais)
ClosedownAt=

# Sauvegarder les paramètres sur les serveurs IBKR
# no recommandé pour serveur
StoreSettingsOnServer=no

# ============================================
# AUTHENTIFICATION 2FA
# ============================================

# Si vous avez activé 2FA sur votre compte IBKR:
# 1. Option RECOMMANDÉE : Désactiver 2FA pour le paper trading
# 2. Option alternative : Utiliser codes de secours
#
# Pour utiliser codes de secours (décommenter):
# SecondFactorDevice=TOTP
#
# Note: IBC ne peut pas gérer 2FA en temps réel sur serveur headless

# ============================================
# GESTION DES DIALOGUES
# ============================================

# Accepter automatiquement nouvelles versions
AcceptNonBrokerageAccountWarning=yes

# Ignorer avertissements
DismissPasswordExpiryWarning=yes
DismissNSEComplianceNotice=yes

# ============================================
# LOGGING IBC
# ============================================

# Niveau de log IBC (Error, Warning, Information, Debug)
LogLevel=Information

# Fichier de log IBC
LogFile=/home/trader/ibc/logs/ibc.log

# ============================================
# GATEWAY SETTINGS
# ============================================

# Redémarrage automatique quotidien
# 23:59 = juste avant minuit
# IbAutoRestart=23:59
# Note: Déconseillé car peut interrompre trades actifs

# Timeout de connexion API (secondes)
SocketPort=4002

# ============================================
# NOTES IMPORTANTES
# ============================================

# 1. SÉCURITÉ:
#    - Ce fichier contient vos identifiants en clair
#    - Protégez-le: chmod 600 ~/ibc/config.ini
#    - Ne le committez JAMAIS sur GitHub

# 2. PAPER TRADING vs LIVE:
#    - Toujours tester en paper d'abord
#    - Pour passer en live: TradingMode=live + IbApiPort=4001
#    - ATTENTION: trades réels = argent réel

# 3. 2FA:
#    - Déconseillé pour bot automatique
#    - Si activé: utiliser codes de secours IBKR
#    - Alternative: compte dédié sans 2FA pour paper trading

# 4. DEBUGGING:
#    - Logs IBC: ~/ibc/logs/ibc.log
#    - Logs Gateway: ~/Jts/ibgateway/logs/
#    - Si problèmes: LogLevel=Debug

# ============================================
# FIN DE CONFIGURATION
# ============================================
